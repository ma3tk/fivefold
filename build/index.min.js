var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},fivehold;!function(a){var b=function(){function a(){this.prefix="",this.suffix=""}return a.prototype.realizeTry=function(a){var b=this;return monapt.Try(function(){return b.realize(a)})},a.prototype.realize=function(a){var b=this.getConstructor(this.parsePathOrName(a));return new b},a.prototype.parsePathOrName=function(b){return b.split(a.pathSplitter)},a.prototype.getConstructor=function(a){for(var b,c=window,d=0,e=a.length;e>d;d++)b=a[d],c=c[d==e-1?this.prefix+b+this.suffix:b];return c},a.pathSplitter=/\./,a}();a.Realizer=b;var c=function(a){function b(){a.apply(this,arguments),this.suffix="Controller"}return __extends(b,a),b}(b);a.ControllerRealizer=c;var d=function(){function a(){}return a}();a.Controller=d;var e=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(d);a.FinalErrorController=e;var f=function(){function a(b,c){this.route=b;var d=c.split(a.targetSplitter);this.pathOrName=d[0],this.method=d[1]}return a.targetSplitter=/::/,a}();a.Action=f;var g=1,h=function(){function a(){this.actions={}}return a.of=function(){return this.sharedInstance},a.prototype.actionForRoute=function(a){var b=this.actions[a];return b?new monapt.Some(b):new monapt.None},a.prototype.storeAction=function(a,b){this.actions[a]=b},a.sharedInstance=new a,a}(),i=function(){function a(){this.realizer=new c}return a.prototype.dispatch=function(a){var b=this;this.realizer.realizeTry(a.pathOrName).orElse(function(){return b.dispatchErrorTry()}).getOrElse(function(){return new e})},a.prototype.dispatchErrorTry=function(){var a=this;return monapt.Try(function(){return h.of(g).actionForRoute("dispatchFailure").map(function(a){return a.pathOrName}).get()}).flatMap(function(b){return a.realizer.realizeTry(b)})},a}();a.Dispatcher=i}(fivehold||(fivehold={}));